<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>iModel.js Plugins - iModel.js</title>
    <meta name="og:title" content="iModel.js Plugins - iModel.js">
    <meta name="twitter:title" content="iModel.js Plugins - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/landingPage.css"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/devRegistration.css">  
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
                            <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" /> 
                            <img id="site-logo-small" class="site-logo-small" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-icon.svg" style="display:none;"/> 
                    </a>
                    <button class="navbar-toggler no-user-select mr-auto" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-header"></span>
                    </button>
                    <ul class="navbar-nav ml-auto pr-0 nav-search">
                        <span class='search-bar'>
                          <li>
                            <div id='search-container'>
                            </div>
                          </li>
                          <script>
                            (function() {
                              var cx = '018053174497532353467:v_gnrjjlqwc';
                              var gcse = document.createElement('script');
                              gcse.type = 'text/javascript';
                              gcse.async = true;
                              gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                              var s = document.getElementsByTagName('script')[0];
                              s.parentNode.insertBefore(gcse, s);
                            })();
                          </script>
                          <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                        </span>
                    </ul>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class="nav-item active"><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li><li class="nav-item change-history-tab "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//changehistory">v1.2.0</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
<div id='main-wrapper'>
    <nav id='sidebar'>
        <div id='table-of-contents' class="custom-scrollbar">
            <div id="dismiss">
                <i id="dismiss-arrow" class="icon icon-chevron-left no-user-select"></i>
            </div>
            <hr id="dismiss-hr" class='sm-only'>
            <ul id='main-navigation-list'>
                <html><head></head><body><h3 id="the imodel.js library"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/" class="table-of-contents-link">The iModel.js Library</a></h3>
    <ul>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/" class="table-of-contents-link">Frontend</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/backend/" class="table-of-contents-link">Backend</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/common/" class="table-of-contents-link">Common</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/geometry/" class="table-of-contents-link">Geometry</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/presentation/" class="table-of-contents-link">Presentation</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/ui/" class="table-of-contents-link">UI</a></li>
    </ul>
    <hr>
    <p>&#xA0;</p>
    <h3 id="helpful links">Helpful links</h3>
    <ul>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/imodelhub/" class="table-of-contents-link">iModelHub</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/faq" class="table-of-contents-link">Frequently Asked Questions</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary" class="table-of-contents-link">Glossary</a></li>
    </ul>
    </body></html>
            </ul>
        </div>
    </nav>    <div class='documentation-main'>
        <article id="main" class="main-content">
            <button type="button" id="sidebarCollapse" class="no-user-select"> <i class="bread-crumb-label bread-crumb-expand-leftnav icon icon-chevron-right no-user-select" id="expand-leftnav"></i></button><div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/">Learning</a> > <a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/">frontend</a> > Plugins</div>
            <div class="edit-link"><a href="https://github.com/imodeljs/imodeljs/tree/master/docs/core/learning/frontend/Plugins.md">Edit this page</a></div>
            <h1 id="imodel.js plugins">iModel.js Plugins</h1>
<p>A <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> is a separately webpacked JavaScript module that is loaded on demand into a browser (or Electron) running the the frontend iModel.js environment.</p>
<p>A <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> is typically written in Typescript. It has access to all classes in the iModel.js host environment. In all iModel.js hosts, that will always include the members of bentleyjs-core, geometry-core, imodeljs-i18n, imodeljs-clients, imodeljs-common, imodeljs-quantity, and imodeljs-frontend. In hosts that use the iModel.js user interface classes, it will also include the members of ui-core, ui-components, ui-ninezone, and ui-framework. In hosts that are designed to format and display EC data, the presentation-common, presentation-components, and presentation-frontend modules will be available as well. An example host is Design Review, which includes all of the modules above.</p>
<h2 class="h-loading-plugins">Loading Plugins<a id="loading-plugins" class="heading-anchor" href="#loading-plugins"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>A <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> can be loaded by calling the <code>loadPlugin</code> static method of the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/pluginadmin'>PluginAdmin</a> class. An <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/frontend/tools/#immediate-tools'>ImmediateTool</a> is provided that allows a user to initiate <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> loading using the &quot;Plugin \&lt;pluginName&gt; [argument list]&quot; keyin.</p>
<p>When the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/pluginadmin'>PluginAdmin</a> loadPlugin method is called, it initiates loading of the designated <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a>. The <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> is loaded as a typical JavaScript script, so any code that is outside the definition of a function or class is immediately executed. By convention, a <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> defines a &quot;main&quot; function and executes that main function as the last line in the script. Generally, the only responsibility of the main function is to instantiate the subclass of <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> defined therein and register it with the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/pluginadmin'>PluginAdmin</a>. Here is an example:</p>
<pre class="no-line-numbers"><code class="language-typescript">declare var IMODELJS_VERSIONS_REQUIRED: string;
declare var PLUGIN_NAME: string;

// define and run the entry point
function main() {
  PluginAdmin.register(new MeasurePointsPlugin(PLUGIN_NAME, IMODELJS_VERSIONS_REQUIRED));
}

main();</code></pre>
<p>In the code above, note the declaration of IMODELJS_VERSIONS_REQUIRED and PLUGIN_NAME. These variables are converted to actual strings when your <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> is webpack&apos;ed as described below. PLUGIN_NAME is used by the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/pluginadmin'>PluginAdmin</a> to keep track of loaded Plugins, and IMODELJS_VERSIONS_REQUIRED is used to validate that the runtime environment includes the iModel.js modules that the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> needs and that the versions loaded are compatible with those required by the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a>.</p>
<h2 class="h-building-plugins">Building Plugins<a id="building-plugins" class="heading-anchor" href="#building-plugins"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The code for the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> is typically transpiled to JavaScript and then converted to a loadable module with <a href="https://webpack.js.org" target="_blank">webpack</a>. Those steps (and others that might be required), are sequenced by the buildIModelJsModule script. See <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/frontend/buildingimodeljsmodules'>Building iModel.js Modules</a> for a full description of building a <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a>.</p>
<p>The versions of iModel.js packages that are required by the <a href="%frontend">Plugin</a> are extracted from the &quot;dependencies&quot; key in the package.json file that is in the root directory of the package that contains the Plugin source. Each iModel.js module from which classes or functions are imported should appear in that dependencies key, along with the version number as is required by <a href="https://docs.npmjs.org" target="_blank">npm</a>. A string that contains each such dependency is generated by webpack and replaces every occurrence of IMODELJS_VERSIONS_REQUIRED in the output JavaScript module.</p>
<h2 class="h-plugin-startup">Plugin startup<a id="plugin-startup" class="heading-anchor" href="#plugin-startup"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Plugins are loaded by the PluginAdmin class. The &quot;main&quot; function in the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> code should instantiate and register the Plugin as illustrated above. The PluginAdmin.register method checks whether the iModel.js runtime environment is compatible with the <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a>&apos;s requirements. If not, an error is displayed to the user (and a list of the errors encountered is returned from the call to PluginAdmin.register) and the Plugin can proceed no further. If the validation succeeds, the <code>onLoad</code> method of your <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a> subclass is called. The argument to the onLoad and onExecute method is an array of strings. The first member of the array is the plugin name. A typical use of the <code>onLoad</code> method is to register any tools that the Plugin provides. Here is a simple subclass of <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/plugin'>Plugin</a>:</p>
<pre class="no-line-numbers"><code class="language-typescript">class MeasurePointsPlugin extends Plugin {
  private _measureNamespace: I18NNamespace | undefined;

  public constructor(name: string, versionsRequired: string) {
    super(name, versionsRequired);
    this._measureNamespace = undefined;
  }

  public onLoad(_args: string[]): void {
    // don&apos;t register the namespace and the tool until the onLoad method. That&apos;s called after we know the versions of the modules required are good.
    this._measureNamespace = IModelApp.i18n.registerNamespace(&quot;MeasureTool&quot;);
    this._measureNamespace.readFinished.then(() =&gt; { MeasurePointsTool.register(this._measureNamespace); })
      .catch((err) =&gt; { console.log(err); });
  }

  public onExecute(_args: string[]): void {
    // don&apos;t start the tool until the localized strings are available.
    this._measureNamespace!.readFinished.then(() =&gt; {
      // start the tool.
      IModelApp.tools.run(&quot;Measure.Points&quot;);
    });
  }
}</code></pre>
<p>The Plugin subclass&apos; onExecute method is called immediately after the call to <code>onLoad</code>. The difference between <code>onLoad</code> and <code>onExecute</code> is that <code>onExecute</code> is called each time <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-frontend/plugins/pluginadmin'>PluginAdmin</a>.loadPlugin is called for the same plugin. Therefore, anything that need be done only once (such as registering a Tool), should go into the <code>onLoad</code> method and everything that should be done each time the Plugin is loaded (in this case, starting the registered Tool), should be done in the <code>onExecute</code> method.</p>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>24 July, 2019</span>
            </p>
            <div id="imodeljs-github-comments">
            </div>
            
            <script>
              $(document).ready(function () {
                function initializeComments(repo) {
                  var s = document.createElement('script');
                  s.src = "https://imodeljs.github.io/iModelJs-docs-output//scripts/utterances/client.js";
                  s.setAttribute('repo', repo);
                  s.setAttribute('issue-term', 'title');
                  s.setAttribute('crossorigin', 'anonymous');
                  s.setAttribute('theme', 'github-light');
                  s.async = true;
            
                  document.getElementById("imodeljs-github-comments").appendChild(s);
                }
            
                var shouldShow = ldclient.variation(featureFlags.GithubIssuesFeedback);
            
                // shouldShow is undefined when ldclient has not emitted 'ready'.
                if (shouldShow === undefined) {
                  ldclient.on('ready', function () {
                    var gitIssueFlag = ldclient.variation(featureFlags.GithubIssuesFeedback);
                    var gitRepo = ldclient.variation(featureFlags.GitRepo);
                    if (gitIssueFlag) {
                      initializeComments(gitRepo);
                    }
                  });
                }
                else if (shouldShow) {
                  var gitRepo = ldclient.variation(featureFlags.GitRepo);
                  initializeComments(gitRepo);
                }
              });
            </script>
            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div class="toc-overlay"></div>
    <div id='inner-table-of-contents'>
       <!-- <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#loading-plugins">Loading Plugins</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#building-plugins">Building Plugins</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#plugin-startup">Plugin startup</a>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;"
            src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo"
            style="zoom:75%; width: 162px; height: 37px;"
            src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js"></script>
</body>

</html>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/monaco-editor/min/vs/loader.js"></script>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/ts-playground.js"></script>
