<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ECSQL - iModel.js</title>
    <meta name="BeMetalsmithVersion" content="v3.3.10">
    <meta name="og:title" content="ECSQL - iModel.js">
    <meta name="twitter:title" content="ECSQL - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/devRegistration.css"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/landingPage.css">  
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
                            <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" /> 
                            <img id="site-logo-small" class="site-logo-small" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-icon.svg" style="display:none;"/> 
                    </a>
                    <button class="navbar-toggler no-user-select mr-auto" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-header"></span>
                    </button>
                    <ul class="navbar-nav ml-auto pr-0 nav-search">
                        <span class='search-bar'>
                          <li>
                            <div id='search-container'>
                            </div>
                          </li>
                          <script>
                            (function() {
                              var cx = '018053174497532353467:v_gnrjjlqwc';
                              var gcse = document.createElement('script');
                              gcse.type = 'text/javascript';
                              gcse.async = true;
                              gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                              var s = document.getElementsByTagName('script')[0];
                              s.parentNode.insertBefore(gcse, s);
                            })();
                          </script>
                          <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                        </span>
                    </ul>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class="nav-item active"><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li><li class="nav-item change-history-tab "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//changehistory">v1.9.0</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
<div id='main-wrapper'>
    <nav id='sidebar'>
        <div id='table-of-contents' class="custom-scrollbar">
            <div id="dismiss">
                <i id="dismiss-arrow" class="icon icon-chevron-left no-user-select"></i>
            </div>
            <hr id="dismiss-hr" class='sm-only'>
            <ul id='main-navigation-list'>
                <html><head></head><body><h3 id="the imodel.js library"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/" class="table-of-contents-link">The iModel.js Library</a></h3>
    <ul>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/" class="table-of-contents-link">Frontend</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/backend/" class="table-of-contents-link">Backend</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/common/" class="table-of-contents-link">Common</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/geometry/" class="table-of-contents-link">Geometry</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/presentation/" class="table-of-contents-link">Presentation</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/ui/" class="table-of-contents-link">UI</a></li>
    </ul>
    <hr>
    <p>&#xA0;</p>
    <h3 id="helpful links">Helpful links</h3>
    <ul>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/imodelhub/" class="table-of-contents-link">iModelHub</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/faq" class="table-of-contents-link">Frequently Asked Questions</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
    <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary" class="table-of-contents-link">Glossary</a></li>
    </ul>
    </body></html>
            </ul>
        </div>
    </nav>    <div class='documentation-main'>
        <article id="main" class="main-content">
            <button type="button" id="sidebarCollapse" class="no-user-select"> <i class="bread-crumb-label bread-crumb-expand-leftnav icon icon-chevron-right no-user-select" id="expand-leftnav"></i></button><div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/">Learning</a> > ECSQL</div>
            <div class="edit-link"><a href="https://github.com/imodeljs/imodeljs/tree/master/docs/learning/ECSQL.md">Edit this page</a></div>
            <h1 id="ecsql">ECSQL</h1>
<blockquote>
<p>Make sure to check out the <a href='https://imodeljs.github.io/iModelJs-docs-output//learning/ecsqltutorial/'>ECSQL Tutorial</a> as well!</p>
</blockquote>
<h2 class="h-what-is-ecsql">What is ECSQL<a id="what-is-ecsql" class="heading-anchor" href="#what-is-ecsql"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>ECSQL is a text-based command language for CRUD (create, read, update, delete) operations against
the business data in an iModel or ECDb file.</p>
<p>ECSQL is an implementation of SQL &#x2014; a proven, well-adopted text-based command language. It adheres to
standard SQL (SQL-92 and SQL-99) wherever possible.</p>
<p>Especially the SQL-99 standard came with a lot of features ECSchemas have too: boolean, date time, binary
data types, structs, arrays, polymorphism. This allows ECSQL to deviate only in very few exceptions from
standard SQL.</p>
<p>Anyone familiar with SQL should intuitively understand ECSQL.</p>
<p>The <strong>key difference between ECSQL and SQL</strong> is that ECSQL targets the <em>logical</em> schema, and not the
underlying database&#x2019;s <em>persistence</em> schema.</p>
<p><img src=".././ecsql_vs_sql.png" alt="ECSQL versus SQL" title="ECSQL versus SQL"></p>
<h2 class="h-ecsql-in-detail">ECSQL in detail<a id="ecsql-in-detail" class="heading-anchor" href="#ecsql-in-detail"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>This is not a comprehensive documentation of the SQL subset of ECSQL. This document only describes the exceptions
to standard SQL and the cases where less known features of the standard are used.
Standard SQL refers to SQL-92 (aka SQL 2), and to SQL-99 (aka SQL 3) whenever SQL-92 is not sufficient.</p>
<blockquote>
<p>All ECSQL examples in the following sections refer to classes and relationships from the <a href='https://imodeljs.github.io/iModelJs-docs-output//./bis/domains/biscore.ecschema'>BisCore</a> ECSchema (unless mentioned otherwise).</p>
</blockquote>
<h2 class="h-fully-qualifying-ecclasses-in-ecsql">Fully qualifying ECClasses in ECSQL<a id="fully-qualifying-ecclasses-in-ecsql" class="heading-anchor" href="#fully-qualifying-ecclasses-in-ecsql"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The classes used in an ECSQL have to be fully qualified by their schemas.</p>
<p>Syntax: <code>&lt;Schema name or alias&gt;.&lt;Class name&gt;</code></p>
<blockquote>
<p>Instead of &apos;.&apos; you can also use &apos;:&apos; as delimiter between schema and class name.</p>
</blockquote>
<h3 class="h-example">Example<a id="example" class="heading-anchor" href="#example"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>The following examples are equivalent. This one uses the schema name:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT Model, CodeValue, Parent FROM BisCore.Element</code></pre>
<p>And this one uses the schema alias:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT Model, CodeValue, Parent FROM bis.Element</code></pre>
<h2 class="h-ecsql-parameters">ECSQL Parameters<a id="ecsql-parameters" class="heading-anchor" href="#ecsql-parameters"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>To bind values to an ECSQL statement after preparation, the following parameter placeholders are
supported.</p>
<table class="table table-responsive"><tbody><tr>
<th>Parameter type</th>
<th>Description</th>
</tr>
<tr>
<td><code>?</code></td>
<td>Positional parameter. Its index is one greater than the previous parameter in the ECSQL statement.</td>
</tr>
<tr>
<td><code>:aaa</code></td>
<td>Named parameter. This allows to bind the same value to more than one placeholder.</td>
</tr>
</tbody></table><h3 class="h-example-1">Example<a id="example-1" class="heading-anchor" href="#example-1"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId FROM bis.GeometricElement3d WHERE Model=? AND LastMod&gt;=?</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId FROM bis.GeometricElement3d LIMIT :pagesize OFFSET (:pageno * :pagesize)</code></pre>
<p>See also sections <a href="#ecinstanceid-and-ecclassid">ECInstanceId and ECClassId</a> and <a href="#limit-and-offset">LIMIT and OFFSET</a>.</p>
<h2 class="h-ecinstanceid-and-ecclassid">ECInstanceId and ECClassId<a id="ecinstanceid-and-ecclassid" class="heading-anchor" href="#ecinstanceid-and-ecclassid"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>ECSQL defines a set of built-in system properties. They don&apos;t have to be defined in the ECSchemas.</p>
<table class="table table-responsive"><tbody><tr>
<th>Property</th>
<th>Description</th>
</tr>
<tr>
<td>ECInstanceId</td>
<td>Is the unique identifier for an ECInstance.</td>
</tr>
<tr>
<td>ECClassId</td>
<td>Refers to the ECClassId of an ECClass. It uniquely identifies an ECClass in the iModel.</td>
</tr>
</tbody></table><blockquote>
<p>In iModel.js the <em>ECClassId</em> is formatted as fully qualified class name when used in the SELECT clause.</p>
</blockquote>
<h3 class="h-example-2">Example<a id="example-2" class="heading-anchor" href="#example-2"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<pre class="no-line-numbers"><code class="language-sql">SELECT Parent, ECClassId FROM bis.Element WHERE ECInstanceId=123</code></pre>
<h2 class="h-basic-data-types-in-ecsql">Basic data types in ECSQL<a id="basic-data-types-in-ecsql" class="heading-anchor" href="#basic-data-types-in-ecsql"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>ECSQL supports all primitive types built into EC. This means that in addition to the basic numeric and string data types in SQL-92, ECSQL also supports boolean, BLOBs, date-times and points.</p>
<h3 class="h-boolean">Boolean<a id="boolean" class="heading-anchor" href="#boolean"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>For Boolean types ECSQL supports the literals <code>True</code> and <code>False</code>.</p>
<h4 class="h-examples">Examples<a id="examples" class="heading-anchor" href="#examples"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.ViewDefinition3d WHERE IsCameraOn = True</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.ViewDefinition3d WHERE IsCameraOn = False</code></pre>
<p>Boolean properties or expressions do not need to be compared to <code>True</code> and <code>False</code> as they return a
boolean value already. So the above examples can also be written like this:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.ViewDefinition3d WHERE IsCameraOn</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.ViewDefinition3d WHERE NOT IsCameraOn</code></pre>
<h3 class="h-datetime">DateTime<a id="datetime" class="heading-anchor" href="#datetime"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>ECSQL supports dates without time (<code>DATE</code>), dates with time (<code>TIMESTAMP</code>), and times without date (<code>TIME</code>).</p>
<blockquote>
<p>ECSQL does not support time zone conversions. Time zone conversions are to be handled by the application.</p>
</blockquote>
<h4 class="h-literals">Literals<a id="literals" class="heading-anchor" href="#literals"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<p><code>DATE &apos;yyyy-mm-dd&apos;</code></p>
<p><code>TIMESTAMP &apos;yyyy-mm-dd hh:mm:ss[.nnn][Z]&apos;</code></p>
<p><code>TIME &apos;hh:mm:ss[.nnn]&apos;</code></p>
<p>The time stamp format matches the <a href="https://www.iso.org/iso-8601-date-and-time-format.html" target="_blank">ISO 8601 standard</a> (see also <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank">https://en.wikipedia.org/wiki/ISO_8601</a>)</p>
<h4 class="h-basic-functions">Basic functions<a id="basic-functions" class="heading-anchor" href="#basic-functions"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<table class="table table-responsive"><tbody><tr>
<th>Function</th>
<th>Description</th>
</tr>
<tr>
<td><code>CURRENT_DATE</code></td>
<td>returns the current date</td>
</tr>
<tr>
<td><code>CURRENT_TIMESTAMP</code></td>
<td>returns the current timestamp in UTC.</td>
</tr>
<tr>
<td><code>CURRENT_TIME</code></td>
<td>returns the current time of the day.</td>
</tr>
</tbody></table><h4 class="h-example-3">Example<a id="example-3" class="heading-anchor" href="#example-3"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.Element WHERE LastMod &gt; DATE &apos;2018-01-01&apos;</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.Element WHERE LastMod &lt; TIMESTAMP &apos;2017-07-15T12:00:00.000Z&apos;`</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.Element WHERE LastMod BETWEEN :startperiod AND :endperiod`</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId FROM myschema.CalenderEntry WHERE startTime &gt;= TIME &apos;08:30:00&apos; AND startTime &lt;= TIME &apos;09:00:00&apos;</code></pre>
<p>The last example is based on this ECSchema snippet:</p>
<pre class="no-line-numbers"><code class="language-xml">&lt;ECEntityClass typeName=&quot;CalenderEntry&quot;&gt;
  &lt;ECProperty propertyName=&quot;startTime&quot; typeName=&quot;dateTime&quot;&gt;
    &lt;ECCustomAttributes&gt;
      &lt;DateTimeInfo xmlns=&quot;CoreCustomAttributes.01.00.01&quot;&gt;
        &lt;DateTimeComponent&gt;TimeOfDay&lt;/DateTimeComponent&gt;
      &lt;/DateTimeInfo&gt;
    &lt;/ECCustomAttributes&gt;
  &lt;/ECProperty&gt;
  &lt;ECProperty propertyName=&quot;endTime&quot; typeName=&quot;dateTime&quot;&gt;
    &lt;ECCustomAttributes&gt;
      &lt;DateTimeInfo xmlns=&quot;CoreCustomAttributes.01.00.01&quot;&gt;
        &lt;DateTimeComponent&gt;TimeOfDay&lt;/DateTimeComponent&gt;
      &lt;/DateTimeInfo&gt;
    &lt;/ECCustomAttributes&gt;
  &lt;/ECProperty&gt;
&lt;/ECEntityClass&gt;</code></pre>
<h3 class="h-points">Points<a id="points" class="heading-anchor" href="#points"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>Points are a built-in primitive type in ECSchemas and are therefore supported in ECSQL.</p>
<p>In the context of ECSQL Point ECProperties are interpreted as structs made up of the
following system properties:</p>
<table class="table table-responsive"><tbody><tr>
<th>Property</th>
<th>Description</th>
</tr>
<tr>
<td>X</td>
<td>X coordinate of the Point2d or Point3d</td>
</tr>
<tr>
<td>Y</td>
<td>Y coordinate of the Point2d or Point3d</td>
</tr>
<tr>
<td>Z</td>
<td>Z coordinate of the Point3d</td>
</tr>
</tbody></table><h4 class="h-example-4">Example<a id="example-4" class="heading-anchor" href="#example-4"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.GeometricElement3d
WHERE Origin.X BETWEEN 3500000.0 AND 3500500.0 AND
Origin.Y BETWEEN 5700000.0 AND 5710000.0 AND
Origin.Z BETWEEN 0 AND 100.0</code></pre>
<h2 class="h-structs">Structs<a id="structs" class="heading-anchor" href="#structs"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>In ECSQL you can refer to a struct ECProperty either as a whole or by just referring to some of its members.
The operator for referencing members of structs in an ECSQL is the &apos;.&apos;.</p>
<h3 class="h-examples-1">Examples<a id="examples-1" class="heading-anchor" href="#examples-1"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT Location FROM myschema.Company WHERE Name=&apos;ACME&apos;</code></td>
<td>Returns the Location struct property as a whole</td>
</tr>
<tr>
<td><code>SELECT Name,Location.Street,Location.City FROM myschema.Company WHERE ECInstanceId=?</code></td>
<td>Returns the Street and City members of the Location struct property</td>
</tr>
<tr>
<td><code>SELECT Name FROM myschema.Company WHERE Location=?</code></td>
<td>Returns rows that match the bound Location value. The Location must be bound as a whole.</td>
</tr>
<tr>
<td><code>SELECT Name FROM myschema.Company WHERE Location.Zip=12314</code></td>
<td>Returns rows that match the Location&apos;s Zip member value</td>
</tr>
</tbody></table><p>based on this ECSchema snippet:</p>
<pre class="no-line-numbers"><code class="language-xml">&lt;ECStructClass typeName=&quot;Address&quot;&gt;
  &lt;ECProperty propertyName=&quot;Street&quot; typeName=&quot;string&quot; /&gt;
  &lt;ECProperty propertyName=&quot;City&quot; typeName=&quot;string&quot; /&gt;
  &lt;ECProperty propertyName=&quot;Zip&quot; typeName=&quot;int&quot; /&gt;
&lt;/ECStructClass&gt;
&lt;ECEntityClass typeName=&quot;Company&quot;&gt;
  &lt;ECProperty propertyName=&quot;Name&quot; typeName=&quot;string&quot; /&gt;
  &lt;ECArrayProperty propertyName=&quot;Location&quot; typeName=&quot;Address&quot; /&gt;
&lt;/ECEntityClass&gt;</code></pre>
<h2 class="h-arrays">Arrays<a id="arrays" class="heading-anchor" href="#arrays"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>In ECSQL you can refer to Array ECProperties only as a whole.</p>
<h3 class="h-examples-2">Examples<a id="examples-2" class="heading-anchor" href="#examples-2"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT PhoneNumbers FROM myschema.Company WHERE Name=&apos;ACME&apos;</code></td>
<td>Returns the PhoneNumbers array of the ACME company</td>
</tr>
<tr>
<td><code>SELECT Name FROM myschema.Company WHERE PhoneNumbers=?</code></td>
<td>Returns the companies that match the bound PhoneNumber array. The array must be bound as a whole.</td>
</tr>
</tbody></table><p>based on this ECSchema snippet:</p>
<pre class="no-line-numbers"><code class="language-xml">&lt;ECEntityClass typeName=&quot;Company&quot;&gt;
  &lt;ECProperty propertyName=&quot;Name&quot; typeName=&quot;string&quot; /&gt;
  &lt;ECArrayProperty propertyName=&quot;PhoneNumbers&quot; typeName=&quot;string&quot; /&gt;
&lt;/ECEntityClass&gt;</code></pre>
<h2 class="h-navigation-properties">Navigation Properties<a id="navigation-properties" class="heading-anchor" href="#navigation-properties"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Navigation properties are ECProperties that point to a related object. They are always backed by an ECRelationshipClass.</p>
<p>In the context of ECSQL navigation properties are interpreted as structs made up of the
following system properties:</p>
<table class="table table-responsive"><tbody><tr>
<th>Property</th>
<th>Description</th>
</tr>
<tr>
<td><code>Id</code></td>
<td>ECInstanceId of the related instance</td>
</tr>
<tr>
<td><code>RelECClassId</code></td>
<td>ECClassId of the ECRelationshipClass backing the navigation property. It is mainly relevant when the ECRelationshipClass has subclasses.</td>
</tr>
</tbody></table><blockquote>
<p>Navigation properties are a convenient short-cut for <a href="#joins">ECSQL Joins</a>.</p>
</blockquote>
<p>See also <a href="#ecrelationshipclasses">ECRelationshipClasses</a>.</p>
<h3 class="h-examples-3">Examples<a id="examples-3" class="heading-anchor" href="#examples-3"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT Parent FROM bis.Element WHERE ECInstanceId=?</code></td>
<td>Returns the Parent navigation property as a whole (including Id and RelECClassId)</td>
</tr>
<tr>
<td><code>SELECT Parent.Id FROM bis.Element WHERE ECInstanceId=?</code></td>
<td>Returns just the Id member of the Parent navigation property</td>
</tr>
<tr>
<td><code>SELECT Parent.Id, Parent.RelECClassId FROM bis.Element WHERE ECInstanceId=?</code></td>
<td>Returns the Id, and the RelECClassId member of the Parent navigation property as two separate columns</td>
</tr>
</tbody></table><h2 class="h-ecrelationshipclasses">ECRelationshipClasses<a id="ecrelationshipclasses" class="heading-anchor" href="#ecrelationshipclasses"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>As ECRelationshipClasses are ECClasses as well, they can be used in ECSQL like ECClasses. Their additional relationship semantics is expressed by these system properties.</p>
<table class="table table-responsive"><tbody><tr>
<th>Property</th>
<th>Description</th>
</tr>
<tr>
<td><code>SourceECInstanceId</code></td>
<td>ECInstanceId of the instance on the <em>source</em> end of the relationship</td>
</tr>
<tr>
<td><code>SourceECClassId</code></td>
<td>ECClassId of the instance on the <em>source</em> end of the relationship</td>
</tr>
<tr>
<td><code>TargetECInstanceId</code></td>
<td>ECInstanceId of the instance on the <em>target</em> end of the relationship</td>
</tr>
<tr>
<td><code>TargetECClassId</code></td>
<td>ECClassId of the instance on the <em>target</em> end of the relationship</td>
</tr>
</tbody></table><blockquote>
<ul>
<li>If the ECRelationshipClass is backed by a <a href="#navigation-properties">Navigation property</a>, it is usually much easier to use the navigation property in your ECSQL than the ECRelationshipClass.</li>
<li><code>SourceECClassId</code> and <code>TargetECClassId</code> are skipped when performing a <code>SELECT * FROM</code> statement or an <code>INSERT INTO</code> statement without a property name list.</li>
</ul>
</blockquote>
<h3 class="h-examples-4">Examples<a id="examples-4" class="heading-anchor" href="#examples-4"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT SourceECInstanceId FROM bis.ElementDrivesElement WHERE TargetECInstanceId=? AND Status=?</code></td>
<td>Returns the ECInstanceId of all Elements that drive the Element bound to the first parameter</td>
</tr>
<tr>
<td><code>SELECT TargetECInstanceId,TargetECClassId FROM bis.ModelHasElements WHERE SourceECInstanceId=?</code></td>
<td>Returns the ECInstanceId and ECClassId of all Elements contained by the Model bound to the parameter</td>
</tr>
</tbody></table><h2 class="h-joins">Joins<a id="joins" class="heading-anchor" href="#joins"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Joins between ECClasses are specified with the standard SQL join syntax (either <code>JOIN</code> ... <code>ON</code> ... or the <em>theta</em> style).</p>
<p>In ECSchemas ECRelationshipClasses are used to relate two ECClasses. ECRelationshipClasses can therefore be seen as virtual link tables between those two classes. If you want to join two ECClasses via their ECRelationshipClass, you need to join the first class to the relationship class and then the relationship class to the second class.</p>
<p>If <a href="#navigation-properties">navigation properties</a> are defined for the ECRelationship class, use the navigation property instead of a join.</p>
<h4 class="h-examples-5">Examples<a id="examples-5" class="heading-anchor" href="#examples-5"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<p>Without navigation property (2 JOINs needed):</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT e.CodeValue,e.UserLabel FROM bis.Element driver JOIN bis.ElementDrivesElement ede ON driver.ECInstanceId=ede.SourceECInstanceId JOIN bis.Element driven ON driven.ECInstanceId=ede.TargetECInstanceId WHERE driven.ECInstanceId=? AND ede.Status=?</code></pre>
<p>With navigation property (Element.Model):</p>
<p>Return the CodeValue and UserLabel of all Elements in the Model with the specified condition (1 JOIN needed):</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT e.CodeValue,e.UserLabel FROM bis.Element e JOIN bis.Model m ON e.Model.Id=m.ECInstanceId WHERE m.Name=?</code></pre>
<p>Return the Model for an Element with the specified condition (No join needed):</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT Model FROM bis.Element WHERE ECInstanceId=?</code></pre>
<h2 class="h-polymorphic-queries">Polymorphic Queries<a id="polymorphic-queries" class="heading-anchor" href="#polymorphic-queries"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>By default, any ECClass in the FROM clause of an ECSQL is treated polymorphically, i.e. all its subclasses are considered as well. If an ECClass should be treated non-polymorphically, i.e. only the class itself and not its subclasses should be considered, add the <code>ONLY</code> keyword in front of it.</p>
<blockquote>
<p>This also applies to <a href='https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/mixins'>Mixins</a>. Mixins technically are ECClasses (abstract Entity ECClasses to be precise). So you can simply query against a mixin class without knowing which classes actually implement the mixin.</p>
</blockquote>
<h3 class="h-examples-6">Examples<a id="examples-6" class="heading-anchor" href="#examples-6"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT ECInstanceId FROM bis.Element WHERE Model=?`</code></td>
<td>Returns all Elements of any subclass in the specified Model</td>
</tr>
<tr>
<td><code>SELECT ECInstanceId FROM bis.SpatialViewDefinition WHERE ModelSelector=?`</code></td>
<td>Returns SpatialViewDefinitions rows and rows of its subclasses for the specified ModelSelector</td>
</tr>
<tr>
<td><code>SELECT ECInstanceId FROM ONLY bis.SpatialViewDefinition WHERE ModelSelector=?`</code></td>
<td>Returns only SpatialViewDefinitions rows for the specified ModelSelect, but no rows from its subclasse.</td>
</tr>
</tbody></table><h2 class="h-limit-and-offset">LIMIT and OFFSET<a id="limit-and-offset" class="heading-anchor" href="#limit-and-offset"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>One way to implement paging is to use the <code>LIMIT</code> and <code>OFFSET</code> clauses in ECSQL.
The <code>LIMIT</code> clause is used to limit the number of results returned from an ECSQL statement. Using <code>LIMIT</code>
together with <code>OFFSET</code> allows specifying a range of rows to be returned. The <code>OFFSET</code> hereby specifies how many rows will be omitted from the result set. The <code>LIMIT</code> specifies the number of rows to be
returned.</p>
<h3 class="h-examples-7">Examples<a id="examples-7" class="heading-anchor" href="#examples-7"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>Return only the first 50 matching Elements:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId,CodeValue,Parent FROM BisCore.Element WHERE Model=? LIMIT 50</code></pre>
<p>Return the 201st through 250th matching Element:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId,CodeValue,Parent FROM BisCore.Element WHERE Model=? LIMIT 50 OFFSET 200</code></pre>
<h2 class="h-sql-functions">SQL Functions<a id="sql-functions" class="heading-anchor" href="#sql-functions"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>SQL functions, either built into SQLite or custom SQL functions, can be used in ECSQL.</p>
<h3 class="h-examples-8">Examples<a id="examples-8" class="heading-anchor" href="#examples-8"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<pre class="no-line-numbers"><code class="language-sql">SELECT substr(CodeValue,1,5) FROM bis.Element WHERE Model=?`</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId FROM bis.Element WHERE lower(UserLabel)=?`</code></pre>
<p>See also <a href="https://www.sqlite.org/lang_corefunc.html" target="_blank">SQLite Functions overview</a>.</p>
<h2 class="h-spatial-queries-and-geometry-functions">Spatial Queries and Geometry Functions<a id="spatial-queries-and-geometry-functions" class="heading-anchor" href="#spatial-queries-and-geometry-functions"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>ECSQL can perform <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/spatialqueries'>spatial queries</a>.</p>
<p>ECSQL has a number of <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/geometrysqlfuncs'>built-in geometry functions</a></p>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>19 December, 2019</span>
            </p>
            <div id="imodeljs-github-comments">
            </div>
            
            <script>
              $(document).ready(function () {
                function initializeComments(repo) {
                  var s = document.createElement('script');
                  s.src = "https://imodeljs.github.io/iModelJs-docs-output//scripts/utterances/client.js";
                  s.setAttribute('repo', repo);
                  s.setAttribute('issue-term', 'title');
                  s.setAttribute('crossorigin', 'anonymous');
                  s.setAttribute('theme', 'github-light');
                  s.async = true;
            
                  document.getElementById("imodeljs-github-comments").appendChild(s);
                }
            
                var shouldShow = ldclient.variation(featureFlags.GithubIssuesFeedback);
            
                // shouldShow is undefined when ldclient has not emitted 'ready'.
                if (shouldShow === undefined) {
                  ldclient.on('ready', function () {
                    var gitIssueFlag = ldclient.variation(featureFlags.GithubIssuesFeedback);
                    var gitRepo = ldclient.variation(featureFlags.GitRepo);
                    if (gitIssueFlag) {
                      initializeComments(gitRepo);
                    }
                  });
                }
                else if (shouldShow) {
                  var gitRepo = ldclient.variation(featureFlags.GitRepo);
                  initializeComments(gitRepo);
                }
              });
            </script>
            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div class="toc-overlay"></div>
    <div id='inner-table-of-contents'>
       <!-- <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#what-is-ecsql">What is ECSQL</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#ecsql-in-detail">ECSQL in detail</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-fully-qualifying-ecclasses-in-ecsql" class='title' href="#fully-qualifying-ecclasses-in-ecsql"/>
            <b class='dropdown-menu-title menu-text'>Fully qualifying ECClasses in ECSQL</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-fully-qualifying-ecclasses-in-ecsql" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#example">Example</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-ecsql-parameters" class='title' href="#ecsql-parameters"/>
            <b class='dropdown-menu-title menu-text'>ECSQL Parameters</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-ecsql-parameters" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#example-1">Example</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-ecinstanceid-and-ecclassid" class='title' href="#ecinstanceid-and-ecclassid"/>
            <b class='dropdown-menu-title menu-text'>ECInstanceId and ECClassId</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-ecinstanceid-and-ecclassid" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#example-2">Example</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-basic-data-types-in-ecsql" class='title' href="#basic-data-types-in-ecsql"/>
            <b class='dropdown-menu-title menu-text'>Basic data types in ECSQL</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-basic-data-types-in-ecsql" class='inner-nav'>
                    <li class='nav-item item '>
                            <a data-target="#inner-nav-boolean" class='title' href="#boolean"/>
                            <b class='dropdown-menu-title menu-text'>Boolean</b>
                            <i class='nav-list-dropdown icon'></i>
                            </a>
                            <ul id="inner-nav-boolean" class='inner-nav'>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#examples">Examples</a>
                                    </li>
                            </ul>
                    </li>
                    <li class='nav-item item '>
                            <a data-target="#inner-nav-datetime" class='title' href="#datetime"/>
                            <b class='dropdown-menu-title menu-text'>DateTime</b>
                            <i class='nav-list-dropdown icon'></i>
                            </a>
                            <ul id="inner-nav-datetime" class='inner-nav'>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#literals">Literals</a>
                                    </li>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#basic-functions">Basic functions</a>
                                    </li>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#example-3">Example</a>
                                    </li>
                            </ul>
                    </li>
                    <li class='nav-item item '>
                            <a data-target="#inner-nav-points" class='title' href="#points"/>
                            <b class='dropdown-menu-title menu-text'>Points</b>
                            <i class='nav-list-dropdown icon'></i>
                            </a>
                            <ul id="inner-nav-points" class='inner-nav'>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#example-4">Example</a>
                                    </li>
                            </ul>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-structs" class='title' href="#structs"/>
            <b class='dropdown-menu-title menu-text'>Structs</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-structs" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#examples-1">Examples</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-arrays" class='title' href="#arrays"/>
            <b class='dropdown-menu-title menu-text'>Arrays</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-arrays" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#examples-2">Examples</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-navigation-properties" class='title' href="#navigation-properties"/>
            <b class='dropdown-menu-title menu-text'>Navigation Properties</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-navigation-properties" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#examples-3">Examples</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-ecrelationshipclasses" class='title' href="#ecrelationshipclasses"/>
            <b class='dropdown-menu-title menu-text'>ECRelationshipClasses</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-ecrelationshipclasses" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#examples-4">Examples</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-joins" class='title' href="#joins"/>
            <b class='dropdown-menu-title menu-text'>Joins</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-joins" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#examples-5">Examples</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-polymorphic-queries" class='title' href="#polymorphic-queries"/>
            <b class='dropdown-menu-title menu-text'>Polymorphic Queries</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-polymorphic-queries" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#examples-6">Examples</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-limit-and-offset" class='title' href="#limit-and-offset"/>
            <b class='dropdown-menu-title menu-text'>LIMIT and OFFSET</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-limit-and-offset" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#examples-7">Examples</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-sql-functions" class='title' href="#sql-functions"/>
            <b class='dropdown-menu-title menu-text'>SQL Functions</b>
            <i class='nav-list-dropdown icon'></i>
            </a>
            <ul id="inner-nav-sql-functions" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#examples-8">Examples</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#spatial-queries-and-geometry-functions">Spatial Queries and Geometry Functions</a>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;"
            src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo"
            style="zoom:75%; width: 162px; height: 37px;"
            src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- TOS/Legals footer placeholder -->
      <div id="GlobalFooter"></div>

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js"></script>
</body>

</html>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/monaco-editor/min/vs/loader.js"></script>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/ts-playground.js"></script>
