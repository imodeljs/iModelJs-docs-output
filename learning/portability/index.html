<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Cross-Platform Technologies - iModel.js</title>
    <meta name="og:title" content="Cross-Platform Technologies - iModel.js">
    <meta name="twitter:title" content="Cross-Platform Technologies - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/prism.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/landingPage.css"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/devRegistration.css">  
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
                        <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" /> 
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class="nav-item active"><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li>
                        </ul>
                        <ul class="navbar-nav ml-auto">
                            <span class='search-bar'>
                              <li>
                                <div id='search-container'>
                                </div>
                              </li>
                              <script>
                                (function() {
                                  var cx = '000629069474334212860:yxwzhn4umym';
                                  var gcse = document.createElement('script');
                                  gcse.type = 'text/javascript';
                                  gcse.async = true;
                                  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                                  var s = document.getElementsByTagName('script')[0];
                                  s.parentNode.insertBefore(gcse, s);
                                })();
                              </script>
                              <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                            </span>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
<div id='main-wrapper'>
    <div id='table-of-contents'>
        <ul id='main-navigation-list'>
            <html><head></head><body><h3 id="the imodel.js library"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/" class="table-of-contents-link">The iModel.js Library</a></h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/" class="table-of-contents-link">Frontend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/backend/" class="table-of-contents-link">Backend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/common/" class="table-of-contents-link">Common</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/geometry/" class="table-of-contents-link">Geometry</a></li>
        </ul>
        <hr>
        <p>&#xA0;</p>
        <h3 id="helpful links">Helpful links</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/imodelhub/" class="table-of-contents-link">iModelHub</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/faq" class="table-of-contents-link">Frequently Asked Questions</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary" class="table-of-contents-link">iModel.js Glossary</a></li>
        </ul>
        </body></html>
        </ul>    </div>
    <div class='documentation-main'>
        <article id="main" name="main-content">
            <div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/">learning</a> > Portability</div>
            <div class="edit-link"><a href="https://github.com/imodeljs/imodeljs/tree/master/docs/core/learning/Portability.md">Edit this page</a></div>
            <h1 id="portability">Portability</h1>
<p>This article describes the technologies and best practices that make iModel.js apps portable. A well-written iModel.js app will run on many platforms without modification.</p>
<p>In addition, a well-written interactive app can be configured to run as a Web abb, a desktop app, and a mobile app, with a few simple runtime checks and no other code changes. Configurability does not mean that an iModel.js app must be the same in all configurations. In fact, the iModel.js architecture makes it easy to <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/apptailoring'>make the app fit the platform</a>.</p>
<p>This degree of portability and configurability is possible because of the technologies used by iModel.js apps and the iModel.js app architecture.</p>
<h2 class="h-cross-platform-technologies">Cross-Platform Technologies<a id="cross-platform-technologies" class="heading-anchor" href="#cross-platform-technologies"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The key technology that makes an app portable is JavaScript. JavaScript engines are available on many operating systems and Web browsers. TypeScript compiles to JavaScript.</p>
<p><a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary/#nodejs'>Node.js</a> is an execution environment for agents, services, and servers. Node.js runs JavaScript programs. Node.js itself runs on many platforms, including Windows and Linux. Node.js is also widely supported by cloud infrastructures and deployment mechanisms.</p>
<p>Web UI technology, including HTML and CSS, makes it possible to write a cross-platform user interface that looks and behaves the same everywhere, in every configuration. Web UI technology is supported by Web browsers and Web view renderers on many platforms. Web UI technology also simplifies the task of reconfiguring or even swapping out an app&apos;s GUI.</p>
<p><a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary/#electron'>Electron</a> combines a Web view client and a nodejs-based server into a single desktop product, without requiring any modification of the code or the UI. Electron runs on many desktop platforms.</p>
<h2 class="h-frontend-portability">Frontend Portability<a id="frontend-portability" class="heading-anchor" href="#frontend-portability"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Since an iModel.js app <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/app/#app-frontend'>frontend</a> is written using Web UI technologies, it is inherently portable.</p>
<h3 class="h-using-plaform-specfic-modules-in-the-frontend">Using Plaform-specfic Modules in the Frontend<a id="using-plaform-specfic-modules-in-the-frontend" class="heading-anchor" href="#using-plaform-specfic-modules-in-the-frontend"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>In some cases, the Web view environment will provide platform-specific globals and modules. The frontend can use these modules in guarded code. To detect the platform of the frontend:</p>
<pre class="no-line-numbers"><code class="language-typescript">const isIos: bool = /iphone|ipod|ipad/.test(window.navigator.userAgent.toLowerCase());
// ... other mobile platforms ...

if (isIos) {
  // ... use iOS-specific modules, such as camera ...
}</code></pre>
<h2 class="h-backend-portability">Backend Portability<a id="backend-portability" class="heading-anchor" href="#backend-portability"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<h3 class="h-services-and-agents">Services and Agents<a id="services-and-agents" class="heading-anchor" href="#services-and-agents"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>True services and agents are easy to make portable, since they always run in Node.js and they always run on a server. Services always run a Web server and always use <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/rpcinterface/#web-rpc-configuration'>Web RPC configuration</a>. Note that an iModel.js service or agent does not deal directly with issues such as deployment, routing, or scaling. Those are the concerns of the cloud infrastructure. As nodejs apps, iModel.js services and agents are cloud-neutral and run on many cloud infrastructures.</p>
<h3 class="h-app-backends">App Backends<a id="app-backends" class="heading-anchor" href="#app-backends"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>App-specific backends do not always run in nodejs, and they do not always run on a server. This section describes how to make an app-specific backend portable and adaptable to multiple app configurations.</p>
<h4 class="h-using-platform-specific-modules-in-the-backend">Using Platform-specific Modules in the Backend<a id="using-platform-specific-modules-in-the-backend" class="heading-anchor" href="#using-platform-specific-modules-in-the-backend"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<p>A backend can use platform-specific globals and modules, but only in guarded code. See <a href="#backend">Platform</a> for methods to detect the platform.</p>
<p>For example, a backend can use node builtins in guarded code, like this:</p>
<pre class="no-line-numbers"><code class="language-typescript">  import { Platform } from &quot;@bentley/imodeljs-backend&quot;;

  if (Platform.isNodeJs()) {
    // access nodejs-specific modules and/or globals
    __dirname;
    process.env;
    require(&quot;fs&quot;);
    // ...
  }</code></pre>
<h3 class="h-avoiding-nodejs-dependencies">Avoiding Node.js dependencies<a id="avoiding-nodejs-dependencies" class="heading-anchor" href="#avoiding-nodejs-dependencies"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>A backend can use the following portable imodeljs-backend classes to avoid unnecessary node dependencies:</p>
<table class="table table-responsive"><tbody><tr>
<th>Node builtin</th>
<th>imodeljs-backend portable substitute</th>
</tr>
<tr>
<td>fs</td>
<td><a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-backend/portability/imodeljsfs'>IModelJsFs</a></td>
</tr>
<tr>
<td>os</td>
<td><a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-backend/portability/platform'>Platform</a></td>
</tr>
<tr>
<td>process</td>
<td><a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-backend/portability/platform'>Platform</a></td>
</tr>
<tr>
<td>__dirname</td>
<td><a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-backend/portability/knownlocations'>KnownLocations</a></td>
</tr>
<tr>
<td>__filename</td>
<td><a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-backend/portability/knownlocations'>KnownLocations</a></td>
</tr>
<tr>
<td>console</td>
<td><a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/bentleyjs-core/logging/logger'>Logger</a></td>
</tr>
<tr>
<td>path</td>
<td><a href="#path">path</a></td>
</tr>
</tbody></table><p>In most cases, the imodeljs-backend substitutes do <em>not</em> provide all of the properties of the node global. That is by design, as not all of the features offered by node are portable.</p>
<h4 class="h-path">path<a id="path" class="heading-anchor" href="#path"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<p>A partial implementation of <code>path</code> is provided on non-nodejs platforms. The methods that are available everywhere are:
posix, win32, sep, delimiter, basename, dirname, extname, normalize, join, isAbsolute.</p>
<p>Use only these methods in unguarded code.</p>
<h4 class="h-unsupported">Unsupported<a id="unsupported" class="heading-anchor" href="#unsupported"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h4>
<p>An app backend must <em>never</em> depend on node-specific <em>packages</em>, including any package that is based on native code.</p>
<blockquote>
<p>For fs-extra, use <a href='https://imodeljs.github.io/iModelJs-docs-output//./reference/imodeljs-backend/portability/imodeljsfs'>IModelJsFs</a>.</p>
</blockquote>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>16 October, 2018</span>
            </p>

            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div id='inner-table-of-contents'>
       <!--  <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#cross-platform-technologies">Cross-Platform Technologies</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-frontend-portability" class='title' href="#frontend-portability"/>
            <b class='dropdown-menu-title menu-text'>Frontend Portability</b>
            <i class='dropdown icon'></i>
            </a>
            <ul id="inner-nav-frontend-portability" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#using-plaform-specfic-modules-in-the-frontend">Using Plaform-specfic Modules in the Frontend</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-backend-portability" class='title' href="#backend-portability"/>
            <b class='dropdown-menu-title menu-text'>Backend Portability</b>
            <i class='dropdown icon'></i>
            </a>
            <ul id="inner-nav-backend-portability" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#services-and-agents">Services and Agents</a>
                    </li>
                    <li class='nav-item item '>
                            <a data-target="#inner-nav-app-backends" class='title' href="#app-backends"/>
                            <b class='dropdown-menu-title menu-text'>App Backends</b>
                            <i class='dropdown icon'></i>
                            </a>
                            <ul id="inner-nav-app-backends" class='inner-nav'>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#using-platform-specific-modules-in-the-backend">Using Platform-specific Modules in the Backend</a>
                                    </li>
                            </ul>
                    </li>
                    <li class='nav-item item '>
                            <a data-target="#inner-nav-avoiding-nodejs-dependencies" class='title' href="#avoiding-nodejs-dependencies"/>
                            <b class='dropdown-menu-title menu-text'>Avoiding Node.js dependencies</b>
                            <i class='dropdown icon'></i>
                            </a>
                            <ul id="inner-nav-avoiding-nodejs-dependencies" class='inner-nav'>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#path">path</a>
                                    </li>
                                    <li class='nav-item item '>
                                            <a class='title solo-title menu-text' href="#unsupported">Unsupported</a>
                                    </li>
                            </ul>
                    </li>
            </ul>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo" style="zoom:75%; width: 162px; height: 37px;"
            src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js"></script>
</body>

</html><script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/monaco-editor/min/vs/loader.js"></script>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/ts-playground.js"></script>
