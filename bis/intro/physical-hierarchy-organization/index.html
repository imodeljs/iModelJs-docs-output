<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PhysicalModel Hierarchy - iModel.js</title>
    <meta name="og:title" content="PhysicalModel Hierarchy - iModel.js">
    <meta name="twitter:title" content="PhysicalModel Hierarchy - iModel.js">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/prism.css">

    <!-- bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <!-- fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/devRegistration.css"> 
    
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/landingPage.css">  
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs_16.png' /> 
        <meta property="og:description" content="Create Immersive Connections with your Infrastructure Digital Twin."><meta property="og:url" content="imodeljs.org"><meta name="twitter:card" content="summary_large_image">
        <meta property="og:image" content="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/twitter-share.png">
        <meta />
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">



        <header id="main-header">
            <div class='nav-header-container'>
                <nav class="navbar nav-main-header navbar-expand-md fixed-top navbar-light pb-0">
                    <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
                        <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" /> 
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar5">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="navbar-collapse collapse justify-content-stretch" id="navbar5">
                        <ul class="navbar-nav mb-0" id="doc-site-tabs">
                                <li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class="nav-item active"><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class="nav-item "><a class="nav-link" href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li>
                        </ul>
                        <ul class="navbar-nav ml-auto">
                            <span class='search-bar'>
                              <li>
                                <div id='search-container'>
                                </div>
                              </li>
                              <script>
                                (function() {
                                  var cx = '000629069474334212860:yxwzhn4umym';
                                  var gcse = document.createElement('script');
                                  gcse.type = 'text/javascript';
                                  gcse.async = true;
                                  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                                  var s = document.getElementsByTagName('script')[0];
                                  s.parentNode.insertBefore(gcse, s);
                                })();
                              </script>
                              <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
                            </span>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
<div id='main-wrapper'>
    <div id='table-of-contents'>
        <ul id='main-navigation-list'>
            <html><head></head><body><h3 id="bis">BIS</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//bis/" class="table-of-contents-link">Introduction</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/modeling-with-bis" class="table-of-contents-link">Modeling with BIS</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/bis-organization" class="table-of-contents-link">BIS Organization</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/fabric-of-the-universe" class="table-of-contents-link">Fabric of the Universe</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/element-fundamentals" class="table-of-contents-link">Element Fundamentals</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/codes" class="table-of-contents-link">Codes</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/elementaspect-fundamentals" class="table-of-contents-link">ElementAspect Fundamentals</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/mixins" class="table-of-contents-link">Mixins</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/model-fundamentals" class="table-of-contents-link">Model Fundamentals</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/relationship-fundamentals" class="table-of-contents-link">Relationship Fundamentals</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schemas-domains" class="table-of-contents-link">Schemas (&#x201C;Domains&#x201D;)</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/information-hierarchy" class="table-of-contents-link">Information Hierarchy</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/physical-models-and-elements" class="table-of-contents-link">Physical Models and Elements</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/functional-models-and-elements" class="table-of-contents-link">Functional Models and Elements</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/analysis-models-and-elements" class="table-of-contents-link">Analysis Models and Elements</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/information-models-and-elements" class="table-of-contents-link">Information Models and Elements</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/physical-hierarchy-organization" class="table-of-contents-link">PhysicalModel Hierarchy</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/categories" class="table-of-contents-link">Categories</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schema-customization" class="table-of-contents-link">Schema Customization</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/appendix-a-data-evolution-across-time" class="table-of-contents-link">Data Evolution Across Time</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schema-versioning-and-generations" class="table-of-contents-link">Schema Versioning</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/glossary" class="table-of-contents-link">BIS Glossary</a></li>
        </ul>
        <!-- TODO: The following are not linked in...?
        ./domains/*
        ./intro/appendix-c-bis-domain-design-fundamentals.md
        ./intro/bis-schema-validation.md
        ./intro/units.md
        -->
        <p>&#xA0;</p>
        <h3 id="bis naming guidelines">BIS Naming Guidelines</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/rules-and-recommendations" class="table-of-contents-link">Rules and Recommendations</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/special-terms" class="table-of-contents-link">Special Terms</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/summary-of-exceptions" class="table-of-contents-link">Summary of Exceptions</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/standard-abbreviations-and-acronyms" class="table-of-contents-link">Abbreviations and Acronyms</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/standard-relationship-strengths-names" class="table-of-contents-link">Relationship &#x201C;Strengths&#x201D;</a></li>
        </ul>
        <p>&#xA0;</p>
        <h3 id="ec">EC</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-schema" class="table-of-contents-link">ECSchema</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-class" class="table-of-contents-link">ECClass</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-entity-class" class="table-of-contents-link">ECEntityClass</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-mixin-class" class="table-of-contents-link">ECMixinClass</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-struct-class" class="table-of-contents-link">ECStructClass</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-custom-attribute-class" class="table-of-contents-link">ECCustomAttributeClass</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-relationship-class" class="table-of-contents-link">ECRelationshipClass</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-property" class="table-of-contents-link">ECProperty</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-custom-attributes" class="table-of-contents-link">ECCustomAttributes</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-enumeration" class="table-of-contents-link">ECEnumeration</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/kindofquantity" class="table-of-contents-link">KindOfQuantity</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/property-category" class="table-of-contents-link">PropertyCategory</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/primitive-types" class="table-of-contents-link">PrimitiveTypes</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/customattribute-container-types" class="table-of-contents-link">CustomAttribute Container Types</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-unit" class="table-of-contents-link">Unit</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-constant" class="table-of-contents-link">Constant</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-phenomenon" class="table-of-contents-link">Phenomenon</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-unitsystem" class="table-of-contents-link">UnitSystem</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-format" class="table-of-contents-link">Format</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/ec/ec-name" class="table-of-contents-link">ECName</a></li>
        </ul>
        </body></html>
        </ul>    </div>
    <div class='documentation-main'>
        <article id="main" name="main-content">
            <div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//bis/">bis</a> > <a href="https://imodeljs.github.io/iModelJs-docs-output//bis/intro/">intro</a> > physical-hierarchy-organization</div>
            <div class="edit-link"><a href="https://github.com/imodeljs/imodeljs/tree/master/docs/core/bis/intro/physical-hierarchy-organization.md">Edit this page</a></div>
            <h1 id="physicalmodel hierarchy">PhysicalModel Hierarchy</h1>
<!-- Responsible for this page: Allan Bommer -->
<p><div class="alert alert-danger" role="alert"><img src=".././media/clean-01.svg" style="width:2%;height:2%;">  Please be aware that this documentation is a work in progress, and is subject to change.</div></p>
<h2 class="h-introduction">Introduction<a id="introduction" class="heading-anchor" href="#introduction"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Each <code>Subject</code> in a BIS Repository can have one <code>PhysicalPartition</code> child Element, under which the <code>PhysicalModel</code>s pertaining to the <code>Subject</code> will be organized using mechanisms described in <a href="../information-hierarchy">Model Hierarchy</a>. The Model Hierarchy is constrained by <a href="../information-hierarchy#InformationPartitionElements">Modeling Perspective</a>, but within the Physical Perspective, it is desirable to further organize Models according to Sites, Facilities, Systems, and Components to make the hierarchy of Models understandable by software and users. This section describes &#x201C;Model Affinity&#x201D; (a way of specifying &#x201C;constraints&#x201D; on the <code>ModelContainsElements</code> relationship) and the best-practice for using them to organize the Physical Model Hierarchy.</p>
<p><img src=".././media/physical-hierarchy-organization-top-of-the-world.png" alt="Top of the PhysicalModel Hierarchy"></p>
<h2 class="h-organization-strategy">Organization Strategy<a id="organization-strategy" class="heading-anchor" href="#organization-strategy"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<h3 class="h-motivations">Motivations<a id="motivations" class="heading-anchor" href="#motivations"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>BIS defines a data model that is shared by a growing set of applications and services. Many of these applications and services read and/or write <code>PhysicalModel</code> data. There are two choices to ensure that these applications and services will be coordinated:</p>
<ul>
<li>Require every application and service to work with any data organization.</li>
<li><p>Specify a data organization which applications and services should read and write.</p>
<p>The second option has been chosen for BIS as it is the more practical solution.</p>
<p>The strategy and organization described in this page may seem overly complex to domain developers who <em>just want to model a widget network</em>. These developers naturally want a simple organization that has a network of widgets in the top-most PhysicalModel. The problem with this <em>widget-centric</em> data organization is that there will be users who want to model widget networks, thingamajig systems and doohickey facilities and coordinate between them; how can these users do that if the top model is dedicated to widgets?</p>
<p>BIS has been created to facilitate multi-discipline coordination, and that naturally adds some complexity to single-discipline use cases.</p>
</li>
</ul>
<h3 class="h-predictability-vs-flexibility--strong-vs-weak-type-safety">Predictability vs Flexibility / Strong vs Weak Type Safety<a id="predictability-vs-flexibility--strong-vs-weak-type-safety" class="heading-anchor" href="#predictability-vs-flexibility--strong-vs-weak-type-safety"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>A choice must be made between strong type-safety and weak type-safety.</p>
<p>Strong type-safety (<em>e.g. <code>RetainingWall</code> can only be contained in a StructuralSystem Model</em>), provides strict checking to ensure that type-related rules are always followed, and hence results in very predictable models that software can easily process. However, strong type-safety limits flexibility and can cause frustration (<em>e.g. I have to create a StructuralSystem Model just to create a single <code>RetainingWall</code>?</em>). Another concern with strong type-safety is that real-project experience with BIS is very limited, so the schema designers understanding of real-world workflows with BIS data is limited; there is a risk of schema designers making strong type-safety decisions that are proved over time to be incorrect.</p>
<p>Therefore, <strong><em>Weak type-safety has been selected for the PhysicalModel hierarchy organization.</em></strong></p>
<p>Validation rules will be created to determine if <code>PhysicalElement</code>s reside in appropriate Models and the <code>PhysicalModel</code> hierarchy is <em>appropriate</em>,  but there will be no prohibitions that ensure that the <code>PhysicalModel</code> hierarchy meets certain standards.</p>
<p>This page provides an overview of the basis of those validation rules and the mechanisms for defining them.</p>
<h3 class="h-physicalmodels-and-the-elements-that-they-model">PhysicalModels and the Elements that they Model<a id="physicalmodels-and-the-elements-that-they-model" class="heading-anchor" href="#physicalmodels-and-the-elements-that-they-model"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>As described in <a href="../information-hierarchy">Model Hierarchy</a>, every <code>Model</code> breaks-down an <code>Element</code>. The <code>Model</code> and the <code>Element</code> represent the same real-world Entity, but the <code>Model</code> provides more granular information about the Entity.</p>
<p>Breakdown <code>Model</code>s are weakly-typed in BIS. To understand the real-world Entity that a <code>Model</code> is modeling, it is necessary to look at the <code>Element</code> which the <code>Model</code> is breaking down. <strong><em>PhysicalModel should not be subclassed.</em></strong> The few <code>PhysicalModel</code> subclasses that exist are deprecated and should not be used. When terms such as &quot;Site Model&quot; are used, they indicate &quot;a <code>Model</code> that breaks down a <code>Site</code>&quot;, but do not indicate a strongly-typed <code>SiteModel</code>.</p>
<p><img src=".././media/physical-hierarchy-organization-building-model.png" alt="Element and Model Modeling Building"></p>
<h2 class="h-modelaffinity-custom-attribute">ModelAffinity Custom Attribute<a id="modelaffinity-custom-attribute" class="heading-anchor" href="#modelaffinity-custom-attribute"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>While strong-typing is not used, there is still a desire to provide validation of the organization of the data in a <code>PhysicalModel</code> hierarchy. To run this validation, the software must be able to determine which <code>Model</code>s are appropriate containers for each <code>Element</code>. This is determined through the <code>ModelAffinity</code> custom attribute.</p>
<p>The <code>ModelAffinity</code> custom attribute can be applied to any <code>PhysicalElement</code> subclass. It declares for the class:</p>
<ul>
<li>Which <code>Element</code>s&apos; breakdown <code>Model</code>s this <code>Element</code> has an affinity for (multiple can be declared).</li>
<li>The strength of that affinity.</li>
<li>The rationale for the affinity.</li>
</ul>
<p>There are three levels of affinity strength:</p>
<ul>
<li><em>Required</em> - not residing in an appropriate <code>Model</code> should trigger a validation error.</li>
<li><em>Recommended</em> - not residing in an appropriate <code>Model</code> should trigger a validation warning.</li>
<li><em>Suggested</em> - not residing in an appropriate <code>Model</code> should trigger a validation note.</li>
</ul>
<p>In the future, <code>ModelAffinity</code> information may be used to provided improved UI tools.</p>
<h3 class="h-example-usage">Example Usage<a id="example-usage" class="heading-anchor" href="#example-usage"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>Here is an example of the <code>ModelAffinity</code> custom attribute in use:</p>
<pre><code>    &lt;ECEntityClass typeName=&quot;StructuralElement&quot; displayLabel=&quot;Structural Element&quot; modifier=&quot;Abstract&quot;&gt;
        &lt;BaseClass&gt;bis:PhysicalElement&lt;/BaseClass&gt;
        &lt;ECCustomAttributes&gt;
            &lt;ClassHasHandler xmlns=&quot;BisCore.01.00&quot; /&gt;
            &lt;ModelAffinity&gt;
              &lt;AffinityStrength&gt;Recommended&lt;/AffinityStrength&gt;
              &lt;Rationale&gt;Structural analysis software may not be able to analyze StructuralElements that do not reside in a StructuralSystem breakdown Model.&lt;/Rationale&gt;
              &lt;BreakdownModels&gt;
                &lt;string&gt;StructuralPhysical:StructuralSystem&lt;/string&gt;
              &lt;/BreakdownModels&gt;
            &lt;/ModelAffinity/&gt;
        &lt;/ECCustomAttributes&gt;
    &lt;/ECEntityClass&gt;
</code></pre><h3 class="h-inherited-modelaffinity">Inherited ModelAffinity<a id="inherited-modelaffinity" class="heading-anchor" href="#inherited-modelaffinity"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p><code>ModelAffinity</code> cannot be <em>overridden</em> in subclasses, but it can be <em>narrowed</em>. The effective affinity setting for a class is the sum of all the defined <code>ModelAffinity</code> attributes in the class and all of its superclasses.</p>
<p>For example, if:</p>
<ul>
<li>There is a <code>Pipe</code> class with a <code>SewerPipe</code> subclass.</li>
<li><code>Pipe</code> has an affinity to <code>ISystem</code>.</li>
<li><code>SewerPipe</code> has an affinity to <code>SewerSystem</code></li>
</ul>
<p>Then the validation for <code>SewerPipe</code> would confirm:</p>
<ul>
<li><code>SewerPipe</code> instances reside in <code>ISystem</code> <code>Model</code>s.</li>
<li><code>SewerPipe</code> instances reside in <code>SewerSystem</code> <code>Model</code>s.</li>
</ul>
<p>A <code>SewerPipe</code> placed in a <code>Site</code> <code>Model</code> would generate two warnings (or errors) during validation; one for not being in an <code>ISystem</code> <code>Model</code> and one for not being in a <code>SewerSystem</code> <code>Model</code>.</p>
<p>When an ancestor class has already defined a <code>ModelAffinity</code>, it only makes sense to define a <em>narrowing</em> <code>ModelAffinity</code> in a subclass. Defining a conflicting <code>ModelAffinity</code> is a symptom of the design of the subclass conflicting with the design of the superclass.</p>
<h3 class="h-syntax-details">Syntax Details<a id="syntax-details" class="heading-anchor" href="#syntax-details"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p><strong>TODO: Remove this section after discussion and implementation</strong></p>
<p><em>This custom attribute is written so it could be applied to other Elements (not just PhysicalElements) in the future.</em></p>
<pre><code>&lt;ECEnumeration typeName=&quot;ModelAffinityStrength&quot; backingTypeName=&quot;string&quot; isStrict=&quot;true&quot;&gt;
  &lt;ECEnumerator value=&quot;Required&quot; description=&quot;Element not residing in this breakdown Model should trigger a validation error.&quot;/&gt;
  &lt;ECEnumerator value=&quot;Recommended&quot;  description=&quot;Element not residing in this breakdown Model should trigger a validation warning.&quot;/&gt;
  &lt;ECEnumerator value=&quot;Suggested&quot;  description=&quot;Element not residing in this breakdown Model should trigger a validation note.&quot;/&gt;
&lt;/ECEnumeration&gt;

&lt;ECCustomAttributeClass typeName=&quot;ModelAffinity&quot; description=&quot;Applied to an Element subclass to indicate that the subclass has an affinity to certain types of breakdown Models (i.e. Models breaking down a certain class of Element). This affinity is a &quot;loose&quot; constraint can be used for validation and UI enhancements. Inherited ModelAffinities are also applied.&quot; appliesTo=&quot;EntityClass&quot;&gt;
  &lt;ECProperty propertyName=&quot;AffinityStrength&quot; typeName=&quot;ModelAffinityStrength&quot; description=&quot;The strength of the affinity between the Element and the BreakdownModels in which it may reside.&quot;/&gt;
  &lt;ECProperty propertyName=&quot;Rationale&quot; typeName=&quot;string&quot; description=&quot;The reason why the affinity exists.&quot;/&gt;
  &lt;ECArrayProperty propertyName=&quot;BreakdownModels&quot; typeName=&quot;string&quot; description=&quot;List of Element subclasses whose breakdown Models are appropriate containers for the class that this custom attribute is applied to. Use format &apos;[SchemaName]:[ClassName]&apos;, e.g. &apos;Fruit:Banana&apos;&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
&lt;/ECCustomAttributeClass&gt;</code></pre><h3 class="h-mixin-classes">Mixin Classes<a id="mixin-classes" class="heading-anchor" href="#mixin-classes"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p><code>ModelAffinity</code> custom attribute instances can <em>refer</em> to mixin classes, but cannot be <em>applied</em> to mixin classes.</p>
<p>The mixin classes <code>ISite</code>, <code>IFacility</code> and <code>ISystem</code> are used in the <code>ModelAffinity</code> custom attribute for many key <code>PhysicalModel</code> hierarchy classes.</p>
<h2 class="h-top-physicalmodel">Top PhysicalModel<a id="top-physicalmodel" class="heading-anchor" href="#top-physicalmodel"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The top <code>PhysicalModel</code> (the one directly owned by the <code>PhysicalPartition</code>) should contain a single <code>PhysicalElement</code> that corresponds to the <code>Subject</code> (that owns the <code>PhysicalPartition</code>). As Subjects define their subject in text only, the subject may be vague (<em>Is &quot;Burj Khalifa&quot; only the building, or is it the building and the surrounding site?&quot;</em>). This vagueness is clarified by the PhysicalElement that is in the top <code>PhysicalModel</code>.</p>
<p>The top <code>PhysicalModel</code> most often contains an <code>ISite</code>, <code>IFacility</code>, or <code>ISystem</code> <code>PhysicalElement</code>.</p>
<h3 class="h-top-physicalmodels-with-more-than-one-physicalelement">Top PhysicalModels with More than One PhysicalElement<a id="top-physicalmodels-with-more-than-one-physicalelement" class="heading-anchor" href="#top-physicalmodels-with-more-than-one-physicalelement"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>There is no strict requirement limiting the top <code>PhysicalModel</code> to contain only a single <code>PhysicalElement</code>. iModels that are generated from other repositories will sometimes have top <code>PhysicalModel</code>s with multiple <code>PhysicalElement</code>s as that best matches the organization of the source data. Legacy data may also have a non-standard organization.</p>
<h2 class="h-physicalmodel-hierarchy-strategy">PhysicalModel Hierarchy Strategy<a id="physicalmodel-hierarchy-strategy" class="heading-anchor" href="#physicalmodel-hierarchy-strategy"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>While <code>ModelAffinity</code> provides a mechanism to declare and enforce a PhysicalModel hierarchy, it does not define a coordinated strategy. The strategy for organizing the hierarchy relies on classifying PhysicalElements into five types:</p>
<ul>
<li><em>Site</em> - An area of land and its contents.</li>
<li><em>Facility</em> - A cross-disciplinary Entity such as a building, bridge, tunnel, wharf, etc.</li>
<li><em>System</em> - A single discipline physical system, such as structural system, electrical system, sewer system, etc.</li>
<li><em>System Component</em> - A component for a particular system.</li>
<li><em>General-Use Component</em> - A component that does not have any <code>ModelAffinity</code>.</li>
</ul>
<p>The overall <code>PhysicalModel</code> hierarchy strategy is defined in the following table:</p>
<table class="table table-responsive"><tbody><tr>
<th>Classification</th>
<th>Affinity to</th>
<th>Example Classes</th>
</tr>
<tr>
<td>ISite</td>
<td>ISite <em>(declared in implementing classes)</em></td>
<td>Site</td>
</tr>
<tr>
<td>IFacility</td>
<td>ISite, IFacility, ISystem  <em>(declared in implementing classes)</em></td>
<td>Building, Bridge, Tunnel</td>
</tr>
<tr>
<td>ISystem</td>
<td>ISite, IFacility, ISystem <em>(declared in implementing classes)</em></td>
<td>SewerSystem, StructuralSystem, etc.</td>
</tr>
<tr>
<td>*System</td>
<td>ISite, IFacility, ISystem</td>
<td>SewerSystem, StructuralSystem</td>
</tr>
<tr>
<td>*SystemComponent</td>
<td>*System</td>
<td>SewerPipe, Beam</td>
</tr>
<tr>
<td>General-Use Component</td>
<td>(none)</td>
<td>Bolt, Chair</td>
</tr>
</tbody></table><p>These types and their behaviors are explained below, along with the behaviors of their breakdown <code>PhysicalModel</code>s if they have breakdown <code>Model</code>s.</p>
<h3 class="h-isite">ISite<a id="isite" class="heading-anchor" href="#isite"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p><code>ISite</code> is mixin class that represents an region of land and all that is contained on, above and below that land. The <code>ISite</code> mixin applies only to <code>PhysicalElement</code> classes.</p>
<p>In conversation (and writing) the <code>Model</code>s that break down <code>Site</code> <code>Element</code>s are referred to as <code>Site</code> <code>Model</code>s, even thought there is not a strongly-typed <code>SiteModel</code> class. By convention, the top-most <code>Model</code> in a <code>PhysicalModel</code> hierarchy is considered a Site <code>Model</code>, even though it breaks down <code>PhysicalPartition</code>.</p>
<p><code>ISite</code> <code>Model</code>s typically contain <code>ISite</code>, <code>IFacility</code>, <code>ISystem</code> and General-Use <code>PhysicalElement</code>s.</p>
<p><code>ISite</code> <code>Elements</code> should only be placed in <code>ISite</code> <code>Model</code>s (and the top <code>PhysicalModel</code>). <code>ISite</code> <code>Elements</code> placed in any other <code>Model</code> will generate validation warnings.</p>
<p><em>To implement this behavior every class that includes the <code>ISite</code> mixin must include a <code>ModelAffinity</code> custom attribute that indicates a &quot;Recommended&quot; affinity to <code>PhysicalPartition</code> and <code>ISite</code>.</em></p>
<h3 class="h-ifacility">IFacility<a id="ifacility" class="heading-anchor" href="#ifacility"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p><code>IFacility</code> is a mixin class that represents a significant multi-disciplinary infrastructure Entity that corresponds well to user concepts. Buildings, bridges, tunnels, wharves, and towers are all examples of multi-discipline Entities that are modeled with a <code>PhysicalElement</code> subclass that includes the <code>IFacility</code> mixin.</p>
<p>In conversation (and writing) the <code>Model</code>s that break down <code>IFacility</code> <code>Element</code>s are referred to as <code>Facility</code> <code>Model</code>s, even thought there is not a strongly-typed <code>IFacilityModel</code> class. These <code>Model</code>s are usually referred to by their more-specific <code>Element</code> types (e.g. <code>Building</code> <code>Model</code>s are <code>Model</code>s that break down <code>Building</code> <code>Element</code>s.)</p>
<p><code>IFacility</code> <code>Model</code>s typically contain <code>IFacility</code>, <code>ISystem</code> and <code>General-Use</code> <code>PhysicalElement</code>s.</p>
<p><code>IFacility</code> <code>Elements</code> may be placed in <code>ISite</code>, <code>IFacility</code> and <code>ISystem</code> <code>Model</code>s. <code>IFacility</code> <code>Element</code>s placed in any other <code>Model</code> will generate validation warnings.</p>
<p><em>To implement this behavior every class that includes the <code>IFacility</code> mixin must include a <code>ModelAffinity</code> custom attribute that indicates a &quot;Recommended&quot; affinity to <code>PhysicalPartition</code>, <code>ISite</code>, <code>IFacility</code> and <code>ISystem</code>.</em></p>
<h3 class="h-isystem">ISystem<a id="isystem" class="heading-anchor" href="#isystem"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p><code>ISystem</code> is a mixin class that represents a significant discipline-specific arrangement of Entities intended to fulfill one or more functions. Sewers, roadways, HVAC and fire-suppression systems are all examples of real-world Entities that are modeled with <code>ISystem</code> subclasses. <code>ISystem</code> subclasses tend to be suffixed with &apos;System&apos; (e.g. StructuralSystem, SewerSystem); &apos;Network&apos; is another commonly used suffix for these classes (e.g. RoadNetwork).</p>
<p>Architecture is also considered an <code>ISystem</code>, as it is discipline-specific and has the same general behaviors at the other <code>ISystem</code>s.</p>
<p>In conversation (and writing) the <code>Model</code>s that break down <code>ISystem</code> <code>Element</code>s are referred to as <code>System</code> <code>Model</code>s, even thought there is not a strongly-typed <code>ISystemModel</code> class. These <code>Model</code>s are usually referred to by their more-specific <code>Element</code> types (e.g. <code>SewerSystem</code> <code>Model</code>s are <code>Model</code>s that break down <code>SewerSystem</code> <code>PhysicalElements</code>.)</p>
<p><code>ISystem</code> <code>Model</code>s may contain <code>IFacility</code>, <code>ISystem</code> and General-Use <code>PhysicalElement</code>s, as well as components specific to the particular <code>ISystem</code> (e.g. <code>SewerPipe</code> in <code>SewerSystem</code>)</p>
<p><code>ISystem</code> <code>Elements</code> may be placed in <code>ISite</code>, <code>IFacility</code> and <code>ISystem</code> <code>Model</code>s. <code>ISystem</code> <code>Element</code>s placed in any other <code>Model</code> will generate validation warnings.</p>
<p><em>To implement this behavior every class that includes the <code>ISystem</code> mixin must include a <code>ModelAffinity</code> custom attribute that indicates a &quot;Recommended&quot; affinity to <code>PhysicalPartition</code>, <code>ISite</code>, <code>IFacility</code> and <code>ISystem</code>.</em></p>
<h3 class="h-system-components">System Components<a id="system-components" class="heading-anchor" href="#system-components"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p>System Component represents an Entity that is part of a specific <code>ISystem</code> and generally does not makes sense outside of the specific system (e.g. sewer pipe outside of sewer system). System Component is not a BIS class, nor mixin.</p>
<p>System Components are identified by their <code>ModelAffinity</code> with a specific <code>ISystem</code> subclass.</p>
<p>System Components rarely have breakdown <code>Model</code>s.</p>
<p>System Component <code>Elements</code> should only be placed in their related <code>System</code> <code>Model</code>s. System Component <code>Elements</code> placed in any other <code>Model</code> will generate validation warnings.</p>
<p><em>To implement this behavior every System Component class must define or inherit a <code>ModelAffinity</code> custom attribute that indicates a &quot;Recommended&quot; (or stronger) affinity to the particular <code>ISystem</code> class that is appropriate for the System Component.</em></p>
<h3 class="h-general-use-components">General-Use Components<a id="general-use-components" class="heading-anchor" href="#general-use-components"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h3>
<p><code>General-Use Components</code> represents Entities such as bolts and chairs which are not specific to any discipline or facility.</p>
<p>General-Use Components are identified by their lack of any <code>ModelAffinity</code>.</p>
<p>General-Use Components rarely have breakdown <code>Model</code>s.</p>
<p>General-Use <code>Elements</code> can be placed in any <code>PhysicalModel</code>. General-Use Components never generate validation warnings.</p>
<h2 class="h-example">Example<a id="example" class="heading-anchor" href="#example"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>The following diagram illustrates all variations of the PhysicalModel hierarchy breakdown that will <em>not</em> generate warnings or errors.</p>
<p><img src=".././media/physical-hierarchy-organization-example.png" alt="Example Organization"></p>
<hr>
<hr>
<hr>
<h1 id="discussion">Discussion</h1>
<p>This section is for discussion of both the content of the documentation and the BIS strategies and policies that back that content.</p>
<h2 class="h-changes-since-june-22-2018">Changes Since June 22 2018<a id="changes-since-june-22-2018" class="heading-anchor" href="#changes-since-june-22-2018"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>Site has been changed to ISite. Resulting in moderated changes (including one image change).</p>
<p>The top PhysicalModel has been given its own behavior, recommended use and clarified relationship to its Subject.</p>
<h2 class="h-site-class">Site Class<a id="site-class" class="heading-anchor" href="#site-class"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<p>We need a Site class that implements ISite. Should it be Sealed?</p>
<h2 class="h-implementation-tasks">Implementation Tasks<a id="implementation-tasks" class="heading-anchor" href="#implementation-tasks"><span><i class="fa fa-link fa-rotate-90"></i></span></a></h2>
<ol>
<li>Create ModelAffinity Custom Attribute</li>
<li>Create schema that defines ISite, IFacility and ISystem.</li>
<li>Create Site class</li>
<li>Provide validation of ModelAffinity usage?</li>
<li>Provide validation code/capability that uses ModelAffinity data.</li>
</ol>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>19 October, 2018</span>
            </p>

            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div id='inner-table-of-contents'>
       <!--  <div id='sticky-container' style="top: 76px; position: fixed;">
  <h4 class='heading'>On this page</h4>
    <div id="overview-container" class="clusterize-scroll">
      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
              <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#introduction">Introduction</a>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-organization-strategy" class='title' href="#organization-strategy"/>
            <b class='dropdown-menu-title menu-text'>Organization Strategy</b>
            <i class='dropdown icon'></i>
            </a>
            <ul id="inner-nav-organization-strategy" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#motivations">Motivations</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#predictability-vs-flexibility--strong-vs-weak-type-safety">Predictability vs Flexibility / Strong vs Weak Type Safety</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#physicalmodels-and-the-elements-that-they-model">PhysicalModels and the Elements that they Model</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-modelaffinity-custom-attribute" class='title' href="#modelaffinity-custom-attribute"/>
            <b class='dropdown-menu-title menu-text'>ModelAffinity Custom Attribute</b>
            <i class='dropdown icon'></i>
            </a>
            <ul id="inner-nav-modelaffinity-custom-attribute" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#example-usage">Example Usage</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#inherited-modelaffinity">Inherited ModelAffinity</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#syntax-details">Syntax Details</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#mixin-classes">Mixin Classes</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-top-physicalmodel" class='title' href="#top-physicalmodel"/>
            <b class='dropdown-menu-title menu-text'>Top PhysicalModel</b>
            <i class='dropdown icon'></i>
            </a>
            <ul id="inner-nav-top-physicalmodel" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#top-physicalmodels-with-more-than-one-physicalelement">Top PhysicalModels with More than One PhysicalElement</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a data-target="#inner-nav-physicalmodel-hierarchy-strategy" class='title' href="#physicalmodel-hierarchy-strategy"/>
            <b class='dropdown-menu-title menu-text'>PhysicalModel Hierarchy Strategy</b>
            <i class='dropdown icon'></i>
            </a>
            <ul id="inner-nav-physicalmodel-hierarchy-strategy" class='inner-nav'>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#isite">ISite</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#ifacility">IFacility</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#isystem">ISystem</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#system-components">System Components</a>
                    </li>
                    <li class='nav-item item '>
                            <a class='title solo-title menu-text' href="#general-use-components">General-Use Components</a>
                    </li>
            </ul>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#example">Example</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#changes-since-june-22-2018">Changes Since June 22 2018</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#site-class">Site Class</a>
    </li>
       <li class='nav-item item '>
            <a class='title solo-title menu-text' href="#implementation-tasks">Implementation Tasks</a>
    </li>
 
      </ul>
    </div>
  </div>

 -->
    </div>
</div>

<!-- Footer -->
<footer class="page-footer font-small mdb-color pt-1 pb-3">
  <!-- Footer Links Container -->
  <div class="container text-center text-md-left">

    <!-- Grid row -->
    <div class="row d-flex align-items-center mt-2">

      <!-- Grid column -->
      <div class="col-md-7 col-lg-8 align-top d-none d-md-block">

        <a href="https://imodeljs.github.io/iModelJs-docs-output//" class="navbar-brand">
          <img id="site-logo" class="site-logo" style="zoom:75%;" src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/imodeljs-logo.svg" />
        </a>
        <small style="color: white; margin-right: 7px;"> powered by </small>
        <a href="https://www.bentley.com">
          <img href="https://www.bentley.com" id="sponsored-by-logo" class="sponsored-by-logo" style="zoom:75%; width: 162px; height: 37px;"
            src="https://imodeljs.github.io/iModelJs-docs-output//landing-page/assets/bentley.svg" />
        </a>
      </div>
      <!-- Grid column -->

      <!-- Grid column -->
      <div class="col-md-5 col-lg-4 ml-lg-0">

        <!-- Social buttons -->
        <div class="text-center text-md-right">
          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://twitter.com/imodeljs" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://github.com/imodeljs" target="_blank">
                <i class="fa fa-github"></i>
              </a>
            </li>
            <li class="list-inline-item">
              <a class="btn-floating btn-sm rgba-white-slight mx-1" href="https://stackoverflow.com/tags/imodeljs"
                target="_blank">
                <i class="fa fa-stack-overflow"></i>
              </a>
            </li>
          </ul>
        </div>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links Container -->

</footer>
<!-- Footer -->

</div>
<a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js"></script>
</body>

</html><script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/monaco-editor/min/vs/loader.js"></script>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/ts-playground.js"></script>
